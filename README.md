# Сортировка ленты   
Данный репозиторий создан в ходе работы над тестовым заданием на позицию стажера в компанию YADRO.

## Детали сортировки

В качестве алгоритма сортировки я использовал external sort, модифицированный под тестовое задание. А именно с изменением  
времени считывания, перемещения головки, записи под нее, и чтения. Как образец взял алгоритм из [следующей статьи](https://en.algorithmica.org/hpc/external-memory/sorting/), только переписал его под  
C++. Было желание распареллелить этот алгоритм, но, к сожалению, не хватило времени.
Краткое описание алгоритма:
1. **Разбитие**. Разбиваем входную ленту постепенно на части, помещающиеся в выделенной нам памяти. Сортируем под-ленту в памяти обычным std::sort().
   После каждого разбития освобождаем буфер под новую часть ленты.
2. **Слияние**. Первый элемент каждой под-ленты пушим в кучу (std::priority_queue) и ассоциируем элемент с номером под-ленты, из которой он взят.
   Далее, пока куча не останется пустой, берем минимальный элемент из кучи, записываем его в выходную ленту, передвигаем головки.

## Клонирование и начало работы
```ShellSession
git clone https://github.com/bashkirian/YADROTask
cd build
```

Если вы работете на Linux, то закомментируйте строки, связанные со сборкой Windows, и раскомментируйте строки, связанные со сборкой Linux
## Компилирование в обычном режиме
```ShellSession
make clean
make tapesort
```

## Компилирование для юнит-тестирования
```ShellSession
make clean
make tapesort
```

## Запуск программы для юнит-тестирования
```ShellSession
./unittests
```
В консоли вы увидите результаты выполнения четырех-юнит тестов и время их выполнения.
## Запуск программы в обычном режиме
Для начала работы необходимо создать два файла входной и выходной ленты в текстовом формате в директории build и наполнить входной файл желаемыми числами.
```ShellSession
./sorttape "inputfile" "outputfile"
```